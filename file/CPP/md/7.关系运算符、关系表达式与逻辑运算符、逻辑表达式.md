# 关系运算符、关系表达式与逻辑运算符、逻辑表达式(要有代码证明)

## 1.关系运算符


​	关系运算符是一类用于比较两个表达式的运算符，其结果为布尔值，即 `true` 或 `false`。关系运算符主要用于控制流语句（如 if 条件语句、循环语句等）中，用于比较两个值之间的关系。

所有的关系运算符包括：

- `==`：等于。比较两个操作数是否相等。
- `!=`：不等于。比较两个操作数是否不相等。
- `>`：大于。左侧操作数是否大于右侧操作数。
- `<`：小于。左侧操作数是否小于右侧操作数。
- `>=`：大于等于。左侧操作数是否大于或等于右侧操作数。
- `<=`：小于等于。左侧操作数是否小于或等于右侧操作数。

在大多数编程语言中，关系运算符和相等性运算符的运算优先级有区别。具体来说，关系运算符（`<`, `<=`, `>`, `>=`）和相等性运算符（`==`, `!=`）的优先级不同，且通常情况下，关系运算符的优先级高于相等性运算符。这意味着，在表达式求值时，会先评估如 `<` 或 `>` 这样的关系运算符，然后再评估 `==` 或 `!=` 这样的相等性运算符。

在实际使用时，它们之间的优先级如下：

1. **算术运算符**（如 `+`, `-`, `*`, `/`）：这些运算符具有最高的优先级（不考虑括号和指数运算）。
2. **关系运算符**（`<`, `<=`, `>`, `>=`）：这些运算符用于比较操作数的大小。
3. **相等性运算符（也属于关系运算符）**（`==`, `!=`）：用于比较操作数的等同性，在C和C++中，相等性运算符优先级略低于大小比较的关系运算符优先级(见《3.算数运算符和表达式》中的详细讨论)。
4. **逻辑运算符**（如 `&&`, `||`）：用于组合布尔表达式，优先级低于相等性运算符（特殊的：逻辑非运算符(隶属于逻辑运算符)是比算术运算符的优先级还要高）。
5. **赋值运算符**（如 `=`, `+=`, `-=`），优先级最低。赋值运算符的低优先级确保了表达式中的算术、关系和逻辑运算会在任何赋值发生之前被计算，这样可以正确地将计算结果赋值给变量。例如，在表达式 x = a + b 中，a + b 会首先被计算，然后其结果会被赋给 x。

​	这意味着，在不使用括号的情况下，算术运算会首先执行，其次是关系运算，然后是等于和不等于比较，最后执行逻辑运算。如果想改变运算的顺序，可以使用括号来明确指定运算的先后顺序。

## 2.关系表达式

​	用关系运算符将两个表达式连接起来的式子就叫关系表达式，是一种使用关系运算符来比较两个值的表达式，其结果为布尔值，即 `true` 或 `false`。关系表达式通常用于控制结构中，如条件语句（if-else）和循环语句（while、for），来根据比较的结果决定程序的流程。

关系运算符包括：

- `==`（等于）
- `!=`（不等于）
- `>`（大于）
- `<`（小于）
- `>=`（大于等于）
- `<=`（小于等于）

### 举例

假设我们有两个变量 `a` 和 `b`，其中 `a = 5` 和 `b = 10`。

1. **等于** (`a == b`): 这个关系表达式检查 `a` 是否等于 `b`。在我们的例子中，结果为 `false`，因为 `5` 不等于 `10`。
2. **不等于** (`a != b`): 这个关系表达式检查 `a` 是否不等于 `b`。在这个例子中，结果为 `true`，因为 `5` 确实不等于 `10`。
3. **大于** (`a > b`): 这个关系表达式检查 `a` 是否大于 `b`。在这个例子中，结果为 `false`，因为 `5` 不大于 `10`。
4. **小于** (`a < b`): 这个关系表达式检查 `a` 是否小于 `b`。在这个例子中，结果为 `true`，因为 `5` 小于 `10`。
5. **大于等于** (`a >= b`): 这个关系表达式检查 `a` 是否大于或等于 `b`。在这个例子中，结果为 `false`，因为 `5` 既不大于也不等于 `10`。
6. **小于等于** (`a <= b`): 这个关系表达式检查 `a` 是否小于或等于 `b`。在这个例子中，结果为 `true`，因为 `5` 小于 `10`。

通过这些例子，可以看到关系表达式如何用于比较两个值，并根据比较结果返回一个布尔值。这种能力在决定程序分支时非常有用。

## 3.逻辑运算符

​	逻辑运算符是用于连接布尔表达式的运算符，主要用于控制程序流程中的条件判断。这些运算符对操作数进行逻辑运算，通常操作数为布尔值（`true` 或 `false`），并返回一个布尔值作为结果。逻辑运算符在编程中广泛用于构建复杂的条件表达式，以实现更细致的控制逻辑。

### 所有的逻辑运算符：

- **AND (`&&`)**：当且仅当所有操作数都为 `true` 时，结果为 `true`。如果任一操作数为 `false`，结果即为 `false`。
- **OR (`||`)**：当至少有一个操作数为 `true` 时，结果为 `true`。只有当所有操作数都为 `false` 时，结果才为 `false`。
- **NOT (`!`)**：逻辑非运算符，用于反转操作数的布尔值。如果操作数为 `true`，结果为 `false`；如果操作数为 `false`，结果为 `true`。

### 运算优先级排序：

1. **NOT (`!`)**：逻辑非运算符具有最高的优先级。
2. **AND (`&&`)**：逻辑与运算符的优先级位于逻辑非与逻辑或之间。
3. **OR (`||`)**：逻辑或运算符具有最低的优先级。

### 优先级示例：

​	(1).在没有使用括号明确指定计算顺序的情况下，逻辑非运算符（`!`）会首先被计算，然后是逻辑与（`&&`），最后是逻辑或（`||`）。例如，表达式 `!A && B || C` 中，首先计算 `!A`，然后是 `A && B` 的结果与 `C` 进行逻辑或运算。如果想改变运算的顺序，可以使用括号。例如，`(A && B) || C` 确保 `A && B` 先于 `C` 被评估。逻辑运算符在编写需要多个条件判断的程序时非常有用，允许开发者创建复杂的逻辑表达式，以控制程序的执行流程。

​	(2).`A && B || !C` 的执行顺序为：

1. **逻辑非 (`!`)**：首先执行 `!C` 操作，因为逻辑非运算符 (`!`) 有最高的优先级。这会将 `C` 的布尔值反转。
2. **逻辑与 (`&&`)**：接着执行 `A && B` 操作。这一步检查 `A` 和 `B` 是否都为 `true`。如果都为 `true`，则结果为 `true`；否则，结果为 `false`。逻辑与运算符 (`&&`) 的优先级低于逻辑非 (`!`) 但高于逻辑或 (`||`)。
3. **逻辑或 (`||`)**：最后，将前两步的结果进行逻辑或 (`||`) 操作。如果 `A && B` 的结果为 `true` 或 `!C` 的结果为 `true`，则整个表达式的结果为 `true`。如果两者都为 `false`，则整个表达式的结果为 `false`。

​	因此，整个表达式的执行顺序是：先计算 `!C`，然后计算 `A && B`，最后用逻辑或 (`||`) 将这两个结果组合起来。

### 其他说明：

​	"&&"和"||"是双目运算符，也就是要求有两个运 算分量，例如(a>b)&&(c>d)，左边(a>b)是第一个运算分量， 右边(c>d)是第二个运算分量，同理，再如(a>b)||(c>d)，左 边(a>b)是第一个运算分量，右边(c>d)是第二个运算分量。 "!"是单目运算符，只要求一个运算分量，这个运算分量放在"!" 的后面。例如!(a>b)，这里的(a>b)整个看成是一个运算分量。

​	对三种逻辑运算符的运算规则说明：(1) a&&b：若a和b都为真，则a&&b才为真，否则为假。 (2) a||b：若a和b有一个为真，则a||b为真，否则为假。 (3) !a:若a为真则!a为假，若a为假则!a为真。

​	几点重要内容： （1）千万不要把"&&"写成"&"，如果犯了这样的错误，则很可能程序不报错（因为"&"是位运算符），但得到的逻辑运算结果显然是不对的，同理，也千万不要把"||"写成"|"，同样，程序可能不报错 （因为"|"也是位运算符），但得到的逻辑运算结果也是不对的。（2）进行逻辑判断的时候，不等于0的数值全部都被认为是true， 总结来说：由系统给出的逻辑运算结果不是0（假）就是1（真），不可能是其他数值，而在逻辑表达式中作为参加逻辑运算的对象，是0就表示假，非0就表示真。

## 4.逻辑表达式

​	逻辑表达式是一种使用逻辑运算符（如 AND、OR、NOT）来连接一个或多个比较表达式或布尔值的表达式，其结果是一个布尔值，即 `true` 或 `false`。逻辑表达式常用于编程中的决策结构（如条件语句和循环语句），允许程序基于一个或多个条件执行不同的代码路径。

逻辑表达式通常涉及以下逻辑运算符：

- **AND (`&&`)**：当所有操作数都为 `true` 时，结果为 `true`。如果任一操作数为 `false`，结果即为 `false`。
- **OR (`||`)**：当至少有一个操作数为 `true` 时，结果为 `true`。只有当所有操作数都为 `false` 时，结果才为 `false`。
- **NOT (`!`)**：反转操作数的布尔值。如果操作数为 `true`，结果为 `false`；如果操作数为 `false`，结果为 `true`。

### 举例

1. **使用 AND (`&&`) 运算符**： 假设有两个变量 `a = 10` 和 `b = 5`，逻辑表达式 `a > 5 && b < 10` 用于检查 `a` 是否大于 `5` 且 `b` 是否小于 `10`。在这个例子中，两个条件都满足，因此整个表达式的结果为 `true`。
2. **使用 OR (`||`) 运算符**： 同样考虑 `a = 10` 和 `b = 5`，逻辑表达式 `a < 5 || b < 10` 用于检查 `a` 是否小于 `5` 或 `b` 是否小于 `10`。虽然 `a < 5` 不成立，但 `b < 10` 成立，所以整个表达式的结果为 `true`。
3. **使用 NOT (`!`) 运算符**： 对于布尔变量 `c = false`，逻辑表达式 `!c` 会将 `c` 的值从 `false` 反转为 `true`。

逻辑表达式使得编程语言能够执行基于复杂条件的决策。通过组合使用不同的逻辑运算符，可以构建出能够处理多种情况和条件的高度灵活的逻辑表达式。

## 5.逻辑运算符求值问题

​	在逻辑表达式求解中，不是所有逻辑运算都会被执行，只有在必须执 行下一个逻辑运算才能求出整个表达式的结果时，才执行该运算。这个现象在编程中被称为“短路求值”（Short-circuit evaluation），这是一种逻辑运算的优化方式，广泛应用于多种编程语言。短路求值意味着，对于逻辑表达式，如果当前的逻辑运算已经能够确定整个表达式的值，那么就不再继续执行后面的逻辑运算了。这不仅提高了效率，还可以避免执行可能引发错误的代码。以下是一些例子：

### AND (`&&`) 运算符的短路求值

```c
if (false && someFunction()) {
    // 这里的代码不会被执行
}
```

​	在这个例子中，由于 `&&` 运算符要求两边的表达式都为 `true` 才返回 `true`，但是左边的表达式已经是 `false`，因此整个表达式无论右边 `someFunction()` 的结果如何，都不可能为 `true`。因此，`someFunction()` 不会被调用，这就是所谓的短路效应。

### OR (`||`) 运算符的短路求值

```c
if (true || someFunction()) {
    // 这里的代码将会被执行
}
```

​	在这个例子中，因为 `||` 运算符要求只要其中一个表达式为 `true`，整个表达式就返回 `true`。左边的表达式已经是 `true`，这就足以确定整个表达式的结果，无需评估 `someFunction()`，因此 `someFunction()` 不会被调用。

### 使用短路求值避免错误

```c
if (pointer != null && pointer.someProperty) {
    // 仅当 pointer 非空，并且 pointer.someProperty 存在（或为真）时，这里的代码才会执行
}
```

​	在这个例子中，如果没有使用短路逻辑，当 `pointer` 为 `null` 时尝试访问 `pointer.someProperty` 可能会导致运行时错误。但是，由于 `&&` 运算符的短路行为，如果 `pointer` 为 `null`，则不会尝试评估 `pointer.someProperty`，从而避免了错误。

​	这些例子展示了短路求值如何在实际编程中工作，以及它是如何帮助避免不必要的计算和潜在的错误。