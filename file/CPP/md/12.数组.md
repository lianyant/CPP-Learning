# 数组

## 1.定义

在C和C++中，数组是一种基本的数据结构，用于存储固定大小的相同类型元素的顺序集合。数组中的每个元素可以通过数组名和索引访问。数组的定义包括数组的类型、数组的名称和数组中元素的数量（大小）。

### 数组的基本定义语法

在C或C++中定义数组的基本语法如下：

```c
type arrayName[arraySize];
```

- `type`：数组元素的数据类型。
- `arrayName`：数组的名称。
- `arraySize`：数组中元素的数量，必须是一个大于零的整数。

### 示例

#### 整型数组

定义一个名为 `numbers` 的数组，它可以存储10个整数：

```c
int numbers[10];
```

#### 字符数组

定义一个能够存储5个字符的数组 `chars`：

```c
char chars[5];
```

#### 初始化数组

在定义数组的同时，还可以初始化数组：

```c
int numbers[5] = {1, 2, 3, 4, 5};
```

如果初始化时没有提供足够的元素来填满数组，剩余的元素会被自动初始化为零：

```c
int numbers[5] = {1, 2}; // 等同于 {1, 2, 0, 0, 0}
```

在C99和C++11及以后的版本中，还可以使用指定初始化器（designated initializers）来初始化数组的特定元素：

```c
int numbers[5] = {[4] = 5}; // 初始化第5个元素为5，其他元素为0
```

### 注意事项

- 数组的大小必须在编译时确定，且一旦确定后不能改变。
- 数组的索引从0开始，最大索引为数组大小减1。
- 访问超出数组范围的元素是未定义行为，可能导致运行时错误。

数组是静态结构，这意味着在整个程序运行期间，数组的大小是固定的。如果需要动态改变集合的大小，可以考虑使用动态分配的数据结构，如C++中的`std::vector`。



## 2.一维数组

一维数组是最简单的数组形式，它是一个线性的元素集合，其中每个元素都有一个索引。在C和C++中，一维数组可以存储基本数据类型（如整数、字符等）或复杂类型（如结构体）的元素。

### 一维数组的一般形式

一维数组的定义遵循以下语法：

```c
type arrayName[arraySize];
```

- `type`：表示数组中元素的数据类型。
- `arrayName`：是数组的名称，用于标识这个数组。
- `arraySize`：是一个整数，表示数组能存储元素的数量。

### 一维数组元素的引用

一旦定义了数组，就可以通过数组名和索引来引用数组中的元素。数组的索引从0开始，所以一个大小为`arraySize`的数组，其最后一个元素的索引是`arraySize - 1`。

```c
arrayName[index]
```

- `index`：要访问的元素的索引，必须是一个整数表达式。

### 一维数组的初始化

在定义一维数组时，可以同时对其进行初始化，即为数组的每个元素指定初始值。

#### 静态初始化

静态初始化指在编译时就确定数组元素的初始值。可以在定义数组时直接提供初始值列表。

```c
int numbers[5] = {1, 2, 3, 4, 5};
```

如果在初始化时未指定足够的元素填满数组，则剩余的元素会自动初始化为该类型的零值（对于基本数据类型，如`int`为0，`char`为'\0'等）。

```c
int numbers[5] = {1, 2}; // 等价于 {1, 2, 0, 0, 0}
```

也可以省略数组大小，让编译器根据提供的初始值数量自动确定数组的大小。

```c
int numbers[] = {1, 2, 3, 4, 5}; // 编译器会自动确定数组大小为5
```

#### 指定初始化

C99和C11标准支持使用指定初始化器来初始化数组的特定元素，其余元素被自动初始化为零。

```c
int numbers[5] = {[2] = 3, [4] = 5}; // 等价于 {0, 0, 3, 0, 5}
```



### 注意事项1

- 数组的索引是基于零的，访问数组时要确保索引在有效范围内（0到`arraySize - 1`）。
- 访问超出数组声明范围的索引是未定义行为，可能导致程序崩溃或不可预期的结果。
- 在函数间传递数组时，通常需要同时传递数组的大小，因为在函数外部无法直接通过数组来确定其大小。

一维数组是处理数据集合的基础，掌握其使用方法对于进行更复杂的数据操作和算法实现至关重要。

### 注意事项2

在C和C++中，定义数组时`arraySize`是否可以是变量，取决于使用的是C语言的哪个标准，以及是否是C++。

#### C语言

​	在C99标准之前（如C90），定义数组时`arraySize`必须是一个编译时常量表达式。这意味着不能使用变量作为数组的大小。

​	从C99标准开始，C语言支持变长数组（Variable Length Array, VLA），允许使用变量作为数组的大小。这使得数组的大小可以在运行时确定。

```c
#include <stdio.h>

int main() {
    int n;
    printf("Enter the size of the array: ");
    scanf("%d", &n);
    int arr[n]; // C99及以后的版本支持这种方式
    for(int i = 0; i < n; i++) {
        arr[i] = i;
    }
    // 使用数组...
    return 0;
}
```

​	需要注意的是，变长数组只在函数作用域内部有效，并且其使用可能会增加栈溢出的风险，因为数组是在栈上分配的。C11标准将变长数组的支持变为可选的，因此在某些编译器或标准模式下可能不可用。

#### C++语言

​	C++标准中不支持变长数组。C++中定义数组时，`arraySize`必须是一个常量表达式，这意味着大小在编译时必须已知，不能使用变量作为数组的大小。如果需要动态数组大小，C++推荐使用动态内存分配，如使用`new`关键字分配数组，或者使用标准模板库中的`std::vector`等容器。

```c++
#include <iostream>
#include <vector>

int main() {
    int n;
    std::cout << "Enter the size of the array: ";
    std::cin >> n;
    std::vector<int> arr(n); // 使用std::vector来创建动态大小的数组
    for(int i = 0; i < n; i++) {
        arr[i] = i;
    }
    // 使用数组...
    return 0;
}
```

​	总的来说，在C语言中，是否能使用变量作为数组大小取决于所使用的C标准。而在C++中，应使用动态内存分配或标准容器来处理动态大小的数组需求。

## 3.二维数组

二维数组在C和C++中是一种非常有用的数据结构，它可以被视为一个数组的数组。这意味着每个元素本身也是一个数组。二维数组常用于存储表格数据，如矩阵，或者用于表示二维空间内的数据点。

### 二维数组的一般形式

二维数组的定义遵循以下基本语法：

```c
type arrayName[rows][columns];
```

- `type` 指定了数组中元素的数据类型。
- `arrayName` 是数组的名称。
- `rows` 和 `columns` 分别指定了数组的行数和列数，它们都必须是整数。

### 二维数组元素的引用

可以通过指定行索引和列索引来访问二维数组中的元素，索引同样是从0开始。访问二维数组中的元素的一般形式如下：

```c
arrayName[rowIndex][columnIndex]
```

- `rowIndex` 是元素所在的行的索引。
- `columnIndex` 是元素所在的列的索引。

### 二维数组的初始化

二维数组可以在声明时进行初始化。如果部分初始化了二维数组，未初始化的元素会被自动设置为该类型的零值。

#### 静态初始化

在声明时直接指定每个元素的值：

```c
int matrix[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};
```

如果数组的大小与初始化器中的元素数量一致，可以省略数组大小：

```c
int matrix[][3] = { // 只指定列数，行数由初始化器决定
    {1, 2, 3},
    {4, 5, 6}
};
```

#### 部分初始化

如果只初始化了数组的一部分，其他元素会自动初始化为0：

```c
int matrix[2][3] = {
    {1},
    {4, 5}
};
```

这将初始化`matrix[0][0]`为1，`matrix[1][0]`为4，`matrix[1][1]`为5，其余元素（`matrix[0][1]`、`matrix[0][2]`、`matrix[1][2]`）将被自动设置为0。

### 注意事项1

- 二维数组在内存中是连续存储的。
- 访问二维数组时，确保行索引和列索引不越界是非常重要的，否则可能会导致未定义的行为。
- 在函数中处理二维数组时，除非使用了指针技巧或封装到结构体中，否则通常需要显式地传递数组的维度信息。

二维数组提供了一种方便的方式来处理需要两个维度来索引数据的情况，比如图像处理（像素矩阵）、游戏开发（地图格局）和矩阵计算等领域。

### 注意事项2

在定义二维数组时，是否可以使用变量作为`rows`和`columns`的值取决于你使用的是C语言还是C++语言，以及你使用的具体C语言标准。

#### C语言

- 在C99及之后的标准中，允许使用变量作为二维数组的`rows`和`columns`（这称为变长数组，VLA）。这意味着你可以在运行时决定数组的大小。变长数组主要用于函数内部，因为它们的大小在编译时是未知的，所以不能作为全局变量使用。

```c
#include <stdio.h>

int main() {
    int m, n;
    scanf("%d %d", &m, &n); // 从用户那里获取m和n的值
    int arr[m][n]; // 使用变量m和n定义二维数组
    // 使用数组...
    return 0;
}
```

- 在C90标准中，`rows`和`columns`必须是常量表达式，不能使用变量。

#### C++语言

- C++标准中不支持使用变量作为数组的大小，因此不能直接使用变量来定义数组的`rows`和`columns`。C++中的数组大小必须是编译时常量。

如果需要一个在运行时大小可变的二维数组，C++推荐使用容器类，如`std::vector`：

```c++
#include <iostream>
#include <vector>

int main() {
    int m, n;
    std::cin >> m >> n; // 从用户那里获取m和n的值
    std::vector<std::vector<int>> arr(m, std::vector<int>(n)); // 创建一个m*n的二维vector
    // 使用数组...
    return 0;
}
```

这个例子中，`std::vector`提供了一个灵活的方式来处理动态二维数组，不受固定大小数组的限制。

#### 总结

- 在C99及更高的C标准中，可以使用变量作为二维数组的`rows`和`columns`。
- 在C++中，数组的维度必须是编译时常量，但可以使用`std::vector`等容器来创建动态大小的二维数组。