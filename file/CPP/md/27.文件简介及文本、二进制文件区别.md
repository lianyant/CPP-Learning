# 文件简介及文本、二进制文件区别

## 1.文件简介

​	文件是计算机系统中用于持久存储数据的基本单位。在硬盘、U盘等非易失性存储介质上，数据以文件的形式存在。每个文件都有一个唯一的文件名，通过文件名，操作系统可以管理和检索磁盘上的数据。简单来说，文件是一串字符序列或数据的集合，它们被存储在存储介质上并由操作系统进行管理。

​	程序设计中的文件操作包括读取和写入数据。当程序需要永久保存数据时（如数据库信息、文档内容、图像文件等），会将数据写入到文件中。相反，当程序需要使用存储在文件中的数据时，它会从文件中读取这些数据到计算机内存中进行处理。

​	文件的概念扩展了程序的能力，允许数据的长期保存和复用。这使得程序不再仅限于实时交互（如屏幕输出和键盘输入），而可以处理更大规模、更复杂的任务。文件系统提供了文件创建、数据写入、读取、更新和删除等操作，这些都是现代编程不可或缺的组成部分。

​	例如，一个简单的文本文件，就是由字符组成的序列。当我们用文本编辑器写作时，每个键盘敲击的字母或符号都追加到字符序列的末尾。当保存这个文档时，这个字符序列就被写入到一个文件中。同样，当我们需要阅读或修改文档时，操作系统会帮助我们通过文件名找到这个文件，然后将文件内容加载到内存中供我们查看和编辑。这个过程中，文件作为数据和信息的容器，扮演了关键角色。

## 2.文本文件和二进制文件区别详细解释

​	根据数据组织形式，把文件分为两种：文本文件（ASCII文件）与二进制文件。

### 文本文件

- **定义**: 文本文件由ASCII字符组成，其内容可用文本编辑器打开，并以人类可读的形式显示。它通常包含字母、数字、符号、换行符等字符，与特定的编码标准（如ASCII）有关。
- **特点**: 文本文件的内容易于阅读和编辑，可以使用简单的文本编辑器查看，比如Notepad或Visual Studio Code。它们通常用于存储代码、配置文件、文档和其他应由人阅读和写作的数据。

​	详细解释：文本文件又称ASCII文件，存储的是ASCII码表示的字符。因为它存储的是字符（例如字母、数字和一些特殊符号），所以这类文件在被打开时能够直接被阅读和理解。例如，如果你在记事本中输入字符串"10000测试abc200"并保存，这个文件包含了数字、中文字符和英文字母。当你保存并关闭这个文件，再次打开它时（如通过桌面上的文件图标），你应该能够看到原始输入的内容，因为文本文件是为了可读性而设计的。

​	文本文件具有直观性：即使在使用不同的程序（不仅限于记事本）打开时，文件内容也保持不变，显示的是当初所输入的文本内容。这是因为文本文件是以一种标准格式存储字符，通常是按照ASCII编码，所以能在各种文本编辑器和查看器中被正确显示。



### 二进制文件

- **定义**: 二进制文件包含任意的数据，这些数据不仅限于ASCII字符，可能包含任何值。这些文件用特定程序或操作系统功能来读取和写入，不打算直接由人类阅读。
- **特点**: 二进制文件存储的数据更加紧凑，可以是任何类型的数据，包括图像、音频、视频、可执行程序和计算机程序处理的复杂数据结构。在二进制文件中，数据被直接按照内存中的表示方式存储，没有进行任何转换或解释。

​	二进制文件是指直接以内存中的数据存储格式存储到存储介质上的文件。这些文件可能包含任何类型的数据，包括那些不是用来直接阅读的数据，如程序代码、图像数据、音频数据等。打开这样的文件通常需要专门的程序来解释文件内容，因为它们可能包含无法直接解读为文字的二进制数据。

### 文件的操作

- **文本文件操作**: 在文本文件中，数据是按照字符序列来存储的，可以利用常见的编程语言的标准库函数来进行读写，例如C语言中的 `fputs` 和 `fgets`。
- **二进制文件操作**: 对于二进制文件，由于其数据的不同解释方式，通常使用特定于数据类型的复杂结构来进行读写，例如C语言中的 `fwrite` 和 `fread`。

​	举例说明，在文本模式下写入整数 `1027`，实际上写入的是字符序列 "1027"，即ASCII码表示的字符 '1'、'0'、'2'、'7'。而在二进制模式下写入整数 `1027`，则直接写入这个整数的内存表示，即它在内存中的二进制形式。

​	总结而言，选择文件类型（文本或二进制）取决于数据如何被使用以及预期的操作方式，它影响了数据如何在文件和内存间转移。文本文件侧重于可读性和跨平台兼容性，而二进制文件侧重于性能和存储效率。



### 详细说明/总结

关于文本文件和二进制文件的详细总结如下：

1. **文件的数据组织**：

   - 文件在计算机中本质上都是以二进制的形式存储的，无论是所谓的“文本文件”还是“二进制文件”。
   - 从人类的角度来看，我们为了便于理解和区分，将文件划分为“文本文件”和“二进制文件”。

2. **文本文件**：

   - 由ASCII字符组成，每个字节代表一个字符，如英文字母、数字和标点符号。
   - 容易阅读和编辑，因为内容在打开后可以直接理解，不包含非打印字符。
   - 例如数字`10000`，如果按照文本文件格式保存，则占用5个字节，因为它实际上存储的是字符'1'、'0'、'0'、'0'、'0'。

   - 文本文件保存形式虽然直观，但可能会占用较多的存储空间，因为即便是简单的数字也会按照ASCII码字符序列存储。

   - 修改文本文件时，比如在二进制编辑器中将内容修改为“1027”并保存，文本文件在被文本编辑器或程序再次打开时，会显示存储的字符序列。

3. **二进制文件**：

   - 直接存储数据的二进制形式，不仅限于文本数据，还包括图像、音频、程序代码等非文本内容。

   - 对于计算机系统而言，所有的文件确实都是二进制文件；它们是字节流的集合。文件系统并不区分文件是“文本”还是“二进制”——这种区分是基于文件内容的解释和应用程序如何处理这些文件。当我们说一个文件是“文本文件”时，我们是在人类可读性的层面上进行区分。文本文件包含的字节序列可以直接映射到字符（如ASCII字符集），因此可以使用文本编辑器等工具直接阅读。而所谓的“二进制文件”，则通常包含了编码数据、图像、可执行代码等，这些数据不是为了直接被人阅读而设计的，而是为了由计算机或特定软件解读和执行。所以，虽然从用户的角度我们通常会根据内容的不同对文件进行“文本”或“二进制”的分类，但从计算机的角度看，所有文件都是以二进制形式存在的，区别仅在于文件内容的解释方式。

   - 例如整数`10000`，如果以二进制形式保存，就会占用实际数值大小相应的存储空间，通常情况下比文本形式更节省空间。

   - 二进制文件可能包含不可打印的字节，当用文本编辑器打开时可能会看到乱码，因为编辑器尝试将二进制数据转换为ASCII字符显示。

   - 在内存中，整数`10000`转化为十六进制`0x2710`，然后存储为`0x10`和`0x27`，在小端存储系统中，`0x27`是高字节而`0x10`是低字节(整数`10000`对应转化为十六进制的`0x1027`了)。

4. **文件的打开和读取**：

   - 双击文件通常被视为尝试以文本形式打开文件。例如，二进制文件以文本形式打开时，可能显示出非预期的字符或乱码。

   - 当文件以文本形式打开，并不是实际修改了文件内容，而是操作系统或应用程序对二进制数据进行了ASCII解码的显示尝试。

   - 二进制编辑器可以查看和修改文件的原始二进制数据，修改后的数据可以直接反映在文件的存储内容上。

​	这些概念和实例说明了文本文件和二进制文件之间的区别以及它们各自适用的情境。文本文件适合于存储需由人阅读的数据，而二进制文件则适合存储计算机处理的原始数据。选择哪一种文件类型取决于数据的使用方式和存储需求。

### 补充

​	在C++中，使用文件操作API时，确实可以指定文件是以文本模式还是以二进制模式来打开、读取和写入。尽管底层存储机制都是相同的（二进制形式），但是打开文件的模式决定了如何处理文件中的数据。

#### 文本模式：

​	在文本模式下，文件流会根据系统的文本文件格式来处理数据。例如，在Windows系统中，文本模式会将换行符"\n"翻译为回车换行符序列"\r\n"，并在读取时执行相反的操作。这意味着如果你在文本模式下写入一个换行符，实际上写入文件的可能是两个字节（回车+换行），而读取时这两个字节会被翻译回单个的换行符。

#### 二进制模式：

​	在二进制模式下，数据会被原样读取和写入，没有任何转换。这在处理非文本数据如图像、音频文件或任何需要精确数据布局的应用中非常重要。二进制模式确保数据的字节在存储和读取时不会被改变或解释。

​	在C++中，可以通过指定`std::ios::binary`标志来以二进制模式打开文件。没有指定这个标志时，默认是文本模式。例如，使用`std::ifstream`或`std::ofstream`时，可以选择模式：

```cpp
std::ofstream outFile("example.txt", std::ios::out); // 默认文本模式
std::ofstream binFile("example.bin", std::ios::out | std::ios::binary); // 明确指定二进制模式
```

​	在读写操作时，如果文件是以文本模式打开的，流会处理文本特定的转换，如换行符的转换。如果文件是以二进制模式打开的，则读写的数据不会进行任何特殊处理，从而保留了数据的原始二进制形式。所以，虽然底层机制相同，高级别的操作（如读写API的行为）则取决于文件打开的模式。
